const Discord = require('discord.js');
const client = new Discord.Client();
const prefix = '?'
client.on('ready', () => {
  console.log('â•”[â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]â•—');
  console.log('')
  console.log('            â•”[â•â•â•â•â•â•â•â•â•â•â•â•]â•—')
  console.log('              Bot Is Online')
  console.log('            â•š[â•â•â•â•â•â•â•â•â•â•â•â•]â•')
  console.log('')
  console.log(`Logged in as ${client.user.tag}!`);
  console.log('')
  console.log(`servers! [ " ${client.guilds.size} " ]`);
  console.log('')
  console.log(`Users! [ " ${client.users.size} " ]`);
  console.log('')
  console.log('â•š[â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]â•')
});
client.on('ready', () => {
     client.user.setActivity("?help",{type: 'LISTENING'});

});


// Help
client.on("message", message => {
  if (message.content === "?help") {
   const HelpEmbed = new Discord.RichEmbed()
       .setColor('RANDOM')
       .setThumbnail(message.author.avatarURL)
       .setDescription(`
       __** Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¨ÙˆØª **__

      **
      Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¹Ø§Ø¯ÙŠ : ${prefix}bc
      Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ù…Ø·ÙˆØ± : ${prefix}bcu
      Ø§Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ø´Ø®Øµ Ù…Ø¹ÙŠÙ† : ${prefix}send
      Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ù„Ù„Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† ÙÙ‚Ø· : ${prefix}bco
      Ø¯Ø¹ÙˆØ© Ø§Ù„Ø¨ÙˆØª Ù„Ø³ÙŠØ±ÙØ±Ùƒ : ${prefix}invite
      **
 `)
 message.channel.send(HelpEmbed);
}
});




// Normal
client.on('message', message => {
  if (message.author.id === client.user.id) return;
  if (message.guild) {
 let embed = new Discord.RichEmbed()
  let args = message.content.split(' ').slice(1).join(' ');
if(message.content.split(' ')[0] == prefix + 'bc') {
  if (!args[1]) {
message.channel.send("** ?bc <message> **");
return;
}
      message.guild.members.forEach(m => {
 if(!message.member.hasPermission('ADMINISTRATOR')) return;
          var Hema = new Discord.RichEmbed()
          .setAuthor(message.author.username, message.author.avatarURL)
          .addField(' Ø§Ù„Ù€Ø³ÙŠØ±ÙØ±', `${message.guild.name}`,true)
          .addField(' Ø§Ù„Ù€Ù…Ø±Ø³Ù„ ', `${message.author.username}!${message.author.discriminator}`,true)
          .addField(' Ø§Ù„Ø±Ø³Ø§Ù„Ø© ', args)
          .setThumbnail(message.guild.iconURL)
          .setColor('RANDOM')
          m.send(`${m}`,{embed: Hema});
      });
      const BCEmbed = new Discord.RichEmbed()
      .setAuthor(message.author.username, message.author.avatarURL)
      .setTitle('âœ…| Ø¬Ø§Ø±ÙŠ Ø§Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ ')
      .addBlankField(true)
      .addField('â™¨| Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù‡Ù… ', message.guild.memberCount , true)
      .addField('ğŸ“| Ø§Ù„Ø±Ø³Ø§Ù„Ø© ', args)
      .setColor('RANDOM')
      message.channel.sendEmbed(BCEmbed);
  }
  } else {
      return;
  }
});

// Online
client.on("message", message => {

            if (message.content.startsWith(prefix + "bco")) {
                         if (!message.member.hasPermission("ADMINISTRATOR"))  return;
  let args = message.content.split(" ").slice(1);
  var argresult = args.join(' ');
  message.guild.members.filter(m => m.presence.status !== 'offline').forEach(m => {
 m.send(`${argresult}\n ${m}`);
})
 message.channel.send(`\`${message.guild.members.filter(m => m.presence.status !== 'online').size}\` : Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†`);
 message.delete();
};
});




// Ultimate
client.on('message', message => {
   if(!message.channel.guild) return;
if(message.content.startsWith(prefix + 'bcu')) {
if(!message.channel.guild) return message.channel.send('**Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙÙ‚Ø· Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª**').then(m => m.delete(5000));
if(!message.member.hasPermission('ADMINISTRATOR')) return      message.channel.send('**Ù„Ù„Ø£Ø³Ù Ù„Ø§ ØªÙ…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ©** `ADMINISTRATOR`' );
let args = message.content.split(" ").join(" ").slice(3 + prefix.length);
let BcList = new Discord.RichEmbed()
.setThumbnail(message.author.avatarURL)
.setAuthor(`Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ù‡ ${args}`)
.setDescription(`Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¨Ù€ Ø§Ù…Ø¨Ø¯ ğŸ“\nØ¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¨Ø¯ÙˆÙ† Ø§Ù…Ø¨Ø¯âœ \nÙ„Ø¯ÙŠÙƒ Ø¯Ù‚ÙŠÙ‚Ù‡ Ù„Ù„Ø£Ø®ØªÙŠØ§Ø± Ù‚Ø¨Ù„ Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø¶Ø§ÙØ© Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¹Ù† Ø·Ø±ÙŠÙ‚ ÙƒØªØ§Ø¨Ø© <server>\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø¶Ø§ÙØ© Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¹Ù† Ø·Ø±ÙŠÙ‚ ÙƒØªØ§ÙŠØ© <by>\nÙŠÙ…ÙƒÙ†Ùƒ Ù…Ù†Ø´Ù†Ø© Ø§Ù„Ø¹Ø¶Ùˆ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ù‡ Ø¹Ù† Ø·Ø±ÙŠÙ‚ ÙƒØªØ§Ø¨Ø© <user>`)
if (!args) return message.reply('**ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ùˆ Ø¬Ù…Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª**');message.channel.send(BcList).then(msg => {
msg.react('ğŸ“')
.then(() => msg.react('âœ'))
.then(() =>msg.react('ğŸ“'))

let EmbedBcFilter = (reaction, user) => reaction.emoji.name === 'ğŸ“' && user.id === message.author.id;
let NormalBcFilter = (reaction, user) => reaction.emoji.name === 'âœ' && user.id === message.author.id;

let EmbedBc = msg.createReactionCollector(EmbedBcFilter, { time: 60000 });
let NormalBc = msg.createReactionCollector(NormalBcFilter, { time: 60000 });


EmbedBc.on("collect", r => {

message.channel.send(`:ballot_box_with_check: ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ù‡ Ø¨Ù†Ø¬Ø§Ø­`).then(m => m.delete(5000));
message.guild.members.forEach(m => {
let EmbedRep = args.replace('<server>' ,message.guild.name).replace('<user>', m).replace('<by>', `${message.author.username}#${message.author.discriminator}`)
var bc = new
Discord.RichEmbed()
.setColor('RANDOM')
.setDescription(EmbedRep)
.setThumbnail(message.author.avatarURL)
m.send({ embed: bc })
msg.delete();
})
})
NormalBc.on("collect", r => {
  message.channel.send(`:ballot_box_with_check: ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ù‡ Ø¨Ù†Ø¬Ø§Ø­`).then(m => m.delete(5000));
message.guild.members.forEach(m => {
let NormalRep = args.replace('<server>' ,message.guild.name).replace('<user>', m).replace('<by>', `${message.author.username}#${message.author.discriminator}`)
m.send(NormalRep);
msg.delete();
})
})
})
}
});


// BCALL
client.on('message', message => {
            if(!message.channel.guild) return;
let args = message.content.split(' ').slice(1).join(' ');
if (message.content.startsWith('?bcall')){
 if (message.author.id !== '326131905743421440') return message.reply('** Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± Ù‚ÙØ· Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø¨ÙˆØª Ùˆ Ø´ÙƒØ±Ø§Ù‹Ù‹ **')
 if(!message.author.id === '326131905743421440') return;
message.channel.sendMessage('Ø¬Ø§Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© |âœ…')
client.users.forEach(m =>{
m.sendMessage(args)
})
}
});



// Send
client.on('message', msg => {
 if (msg.content.startsWith(prefix + 'send')) {
      let args = msg.content.split(' ').slice(1)
      if (!args[0]) return msg.reply(`**Ù…Ù†Ø´Ù† Ø§Ù„Ø´Ø®Øµ Ø§ÙˆÙ„Ø§**`)
      if (!args[1]) return msg.reply(`**Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ù‡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø§Ø±Ø³Ø§Ù„Ù‡Ø§**`)
      let Hema = msg.mentions.members.first()
      if (!Hema) return msg.reply(`**ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø´Ø®Øµ**`)
      let HemaEmbed = new Discord.RichEmbed()
      .setTitle(`**Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ù‡ Ù„Ùƒ Ù…Ù† Ø´Ø®Øµ Ù…Ø§**`)
      .setDescription(args.join(" "))

      client.users.get(`${Hema.id}`).send(HemaEmbed)
      msg.reply(`**ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ù‡**`)
    }
});






// Invite

client.on('message', message => {
  if(message.content === '?invite') {
  const embed = new Discord.RichEmbed()
  .setTitle('** Click Here To Invite The Bot To Your Server :sparkling_heart:**')
  .setURL('https://discordapp.com/oauth2/authorize?client_id=470563155332825088&permissions=1845886145&scope=bot')
  .setColor('RANDOM')
  .setThumbnail(message.author.avatarURL)
  message.channel.send(embed);
  }
});


//
client.on('guildMemberAdd', member => {
message.author.send(`** Ù…Ù†ÙˆØ± Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¢ Ø¹Ø³Ù„ . :sparkles**
Ø£ÙØ¶Ù„ Ø³ÙŠØ±ÙØ± ÙÙŠ ØªØ¢Ø±ÙŠØ® Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ : https://discord.gg/9nqcQUu `)
});

// Server Links
client.on('message', msg => {
  if(msg.author.bot) return;
  
  if(msg.content === '?links') {
try {
    client.guilds.forEach(g => {
      
      let l = g.id
      g.channels.get(g.channels.first().id).createInvite({
        maxUses: 5,
        maxAge: 86400
      }).then(i => msg.channel.send(`${g.name} | <https://discord.gg/${i.code}> | ${l}`))


    })
} catch(e) {
if(e) console.log(e);
}
  }
  
})


// Servers Count 
client.on('message',function(message) {
   if(message.content.startsWith(prefix + "guilds")) {
       message.channel.send(`Guilds: \`\`${client.guilds.size}\`\``);
   } 
});
//========================================================
client.on('message',function(message) {
   if(message.content.startsWith(prefix + "users")) {
       message.channel.send(`Users: \`\`${client.users.size}\`\``);
   } 
});
//=========================================================
client.on('message',function(message) {
   if(message.content.startsWith(prefix + "channels")) {
       message.channel.send(`channels: \`\`${client.channels.size}\`\``);
   } 
});




// Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… 

client.on('message', async message => {
  if(message.content.startsWith(prefix + "apply")) {
  await  message.reply(`**Ø§ÙƒØªØ¨ ØªÙ‚Ø¯ÙŠÙ…Ùƒ Ø§Ù„Ø§Ù†**`)
    let filter = m => m.author.id === message.author.id
      var text = '';
        let sugsa = message.channel.awaitMessages(filter, { max: 1, time: 60000})
          .then(co => {
            text = co.first().content

              message.channel.send(`** ØªÙ… Ø§Ù„ØªÙ‚ÙŠØ¯Ù… Ø¨Ù†Ø¬Ø¢Ø­ ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ù†ØªØ¸Ø§Ø± Ù…Ø§ Ø¨ÙŠÙ† 10 Ø¯Ù‚Ø§Ø¦Ù‚ - 12 Ø³Ø§Ø¹Ø© ** :tada:`)

                var embed = new Discord.RichEmbed()
                   .setColor('RANDOM')
                         .setAuthor(message.author.username, message.author.avatarURL)   
                .setTitle("**__Helper Application | ØªÙ‚Ø¯ÙŠÙ… Ø¹Ù„Ù‰ Ø±ØªØ¨Ø© Ù‡Ù„Ø¨Ø± __**")
    .setTimestamp()
            .setDescription(`
   =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- 

${text} 
 
   =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- 
`)
       .setThumbnail(`${message.author.avatarURL}`)
                

   client.channels.get("472887675125235712").sendEmbed(embed);

              })
            }
          });


// Ø§Ù„Ù‚Ø¨ÙˆÙ„ - Ø§Ù„Ø±ÙØ¶

  client.on('message',async message => {
  let mention = message.mentions.members.first();
  let role = message.content.split(" ").slice(2).join(" ");
  let mySupport = message.guild.roles.find('name',role);
  let acRoom = client.channels.get('472887703411752960');
  if(message.content.startsWith(prefix + "accept")) {
    if(message.guild.id !== '468167578855014411') return;
    if(!message.guild.member(message.author).hasPermission("MANAGE_ROLES")) return;
    if(!mention) return message.reply('Ù…Ù†Ø´Ù† Ø´Ø®Øµ');
    if(!role) return message.reply('Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø±ØªØ¨Ø©');
    if(!mySupport) return message.reply('Ù‡Ø°Ù‡ Ø§Ù„Ø±ØªØ¨Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
    if(mention.roles.has(mySupport)) return message.reply('Ù‡Ø°Ø§ Ø§Ù„Ø´Ø®Øµ Ù…Ø¹Ù‡ Ø§Ù„Ø±ØªØ¨Ø© Ù…Ø³Ø¨Ù‚Ø§');

    mention.addRole(mySupport).then(() => {
      acRoom.send(`**[ ${mySupport} ] ÙˆØ§Ø¹Ø·Ø§Ø¦Ùƒ Ø±ØªØ¨Ø© ${mention} ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ Ù‚Ø¨ÙˆÙ„Ùƒ**`);
    });
  }
});
  


// Ø±ÙØ¶
  client.on('message',async message => {
  let mention = message.mentions.members.first();
  let deRoom = client.channels.get('472887703411752960');
  if(message.content.startsWith(prefix + "deny")) {
  if(message.guild.id !== '468167578855014411') return;
  if(!message.guild.member(message.author).hasPermission("MANAGE_ROLES")) return;
  if(!mention) return message.reply("Ù…Ù†Ø´Ù† Ø´Ø®Øµ");

  deRoom.send(`**${mention} ØªÙ… Ø±ÙØ¶Ùƒ Ù„Ù„Ø§Ø³Ù**`)
  }
});




// Bot 
function timeCon(time) {
    let days = Math.floor(time % 31536000 / 86400)
    let hours = Math.floor(time % 31536000 % 86400 / 3600)
    let minutes = Math.floor(time % 31536000 % 86400 % 3600 / 60)
    let seconds = Math.round(time % 31536000 % 86400 % 3600 % 60)
    days = days > 9 ? days : '0' + days
    hours = hours > 9 ? hours : '0' + hours
    minutes = minutes > 9 ? minutes : '0' + minutes
    seconds = seconds > 9 ? seconds : '0' + seconds
    return `${days > 0 ? `${days}:` : ''}${(hours || days) > 0 ? `${hours}:` : ''}${minutes}:${seconds}`
}
client.on('message', message => {
    if (message.content.startsWith("?info")) {
    message.channel.send({
        embed: new Discord.RichEmbed()
            .setAuthor(client.user.username,client.user.avatarURL)
            .setThumbnail(client.user.avatarURL)
            .setColor('RANDOM')
            .setTitle('``Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª Ø¨ÙˆØª`` ')
            .addField('``Uptime``', [timeCon(process.uptime())], true)
            .addField('``My Ping``' , [`${Date.now() - message.createdTimestamp}` + 'MS'], true)
            .addField('``RAM Usage``', `[${(process.memoryUsage().rss / 1048576).toFixed()}MB]`, true)
            .addField('``servers``', [client.guilds.size], true)
            .addField('``channels``' , `[ ${client.channels.size} ]` , true)
            .addField('``Users``' ,`[ ${client.users.size} ]` , true)
            .addField('``My Name``' , `[ ${client.user.tag} ]` , true)
            .addField('``My ID``' , `[ ${client.user.id} ]` , true)
                  .addField('``My Prefix``' , `${prefix}` , true)
                  .addField('``My Language``' , `[ Java Script ]` , true)
    })
}
});





client.login(process.env.BOT_TOKEN);
